@model CsiTest.ViewModels.NewRandomNumbersViewModel
@{
    ViewBag.Title = "New";
}
<h2>New Random Numbers</h2>

<script type="text/javascript">
    $(function () {
        $('#AddNumber').click(function () {
            var dest = $('#UnsortedNumbers');
            var source = $('#NewNumber');
            if (source.val() === "") {
                toastr["error"]("Please enter a number", "Invalid Operation")
            } else {
                
                if (dest.val() !== "") {
                    dest.append(", ");
                }
                dest.append(source.val());
                $('#Submit').prop("disabled", "");
                
                
                source.val('');
                source.focus();
            }
        });

       

        $('#Advanced').click(function () {
            if ($('#CheckboxAdvanced').is(':checked')) {
                $('#UnsortedNumbers').prop("readonly", "");
                $('#UnsortedNumbers').prop("disabled", "");
                $('#AdvancedWarning').show();
                $('#Submit').prop("disabled", "");
            } else {
                $('#AdvancedWarning').hide();
                if ($('#UnsortedNumbers').val() === undefined || $('#UnsortedNumbers').val() === "")
                {
                    $('#Submit').prop("disabled", "disabled");
                    $('#UnsortedNumbers').prop("disabled", "disabled");
                } else {
                    $('#UnsortedNumbers').prop("readonly", "readonly");
                }
            }
        });
        $('#UnsortedNumbers').prop("disabled", "disabled");
    })
</script>

@using (Html.BeginForm("Create", "RandomNumbers"))
{
    <div class="row">
        <div class="col-lg-3">
            <div class="input-group">
                <input type="number" id="NewNumber" class="form-control" placeholder="Enter Number">
                <span class="input-group-btn">
                    <button class="btn btn-default" id="AddNumber" type="button">Add</button>
                </span>
            </div>
            
            <div class="checkbox" id="Advanced">
                <label><input id="CheckboxAdvanced" type="checkbox">Advanced Mode</label>
            </div>
            <div class="form-group">
                @Html.LabelFor(m => m.UnsortedNumbers)
                @Html.TextAreaFor(m => m.UnsortedNumbers,
           new
           {
               @class = "form-control",
               required = "required",

           })
            </div>
            <div class="alert alert-warning" hidden id="AdvancedWarning">
                <strong>Advanced Edit</strong> Enter a list of numbers seperated by commas. Anything entered that is not a number will be ignored.
            </div>

            <div class="form-group">
                @Html.LabelFor(m => m.SortDirection)
                @Html.DropDownListFor(m => m.SortDirection, new SelectList(Model.SortDirections, "Key", "Value"), "Select sort order",
           new
           {
               required = "required",
               @class = "form-control"
           })
            </div>


            <button id="Submit" disabled="disabled" type="submit" class="btn btn-primary">Save</button>
        </div>
       
    </div>
}

